---
import ThemeToggle from "./ThemeToggle.astro";
---

<header id="site-header" class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-[90%] max-w-5xl
  rounded-full bg-background/80 dark:bg-black/50 backdrop-blur-md border border-border px-6 py-4 flex items-center justify-between transition-all duration-300 shadow-sm">
  
  <!-- Logo -->
  <a href="/" class="flex items-center gap-2 group">
    <img src="/assets/logo.png" alt="tinykite Logo" class="w-8 h-8 rounded-lg" />
    <span class="font-bold text-text text-xl tracking-tight" style="font-family: 'Nunito', sans-serif;">tinykite</span>
  </a>

  <!-- Desktop Navigation -->
  <nav class="hidden md:flex items-center gap-8 text-gray-600 dark:text-gray-300 text-sm font-medium">
    <a href="/#apps" class="hover:text-primary transition-colors">Apps</a>
    <a href="/#about" class="hover:text-primary transition-colors">About</a>
  </nav>

  <!-- CTA & Theme Toggle -->
  <div class="flex items-center gap-4">
    <div class="hidden md:block">
      <ThemeToggle />
    </div>
    <a href="/contact" class="hidden md:block px-5 py-2 bg-text text-background text-sm font-semibold rounded-full hover:opacity-80 transition-opacity">
      Contact Us
    </a>
    
    <!-- Mobile Menu Icon -->
    <button id="menu-icon" class="md:hidden text-text focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden absolute top-full mt-4 right-0 w-full bg-white/95 dark:bg-black/90 border border-border rounded-2xl p-6 flex flex-col gap-4 text-center backdrop-blur-xl shadow-xl">
    <a href="/#apps" class="text-gray-900 dark:text-gray-100 hover:text-primary text-lg font-medium">Apps</a>
    <a href="/#about" class="text-gray-900 dark:text-gray-100 hover:text-primary text-lg font-medium">About</a>
    <div class="flex justify-center py-2">
      <ThemeToggle />
    </div>
    <a href="/contact" class="text-primary font-medium">Contact Us</a>
  </div>
</header>

<script>
  const menuIcon = document.getElementById("menu-icon");
  const mobileMenu = document.getElementById("mobile-menu");
  const header = document.getElementById("site-header");

  if (menuIcon && mobileMenu) {
    menuIcon.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });

    // Close menu when clicking a link
    const menuLinks = mobileMenu.querySelectorAll("a");
    menuLinks.forEach(link => {
      link.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
      });
    });
  }

  if (header) {
    window.addEventListener("scroll", () => {
      if (window.scrollY > 50) {
        header.classList.add("shadow-lg", "bg-white/90", "dark:bg-black/90");
        header.classList.remove("bg-background/80", "dark:bg-black/50");
      } else {
        header.classList.remove("shadow-lg", "bg-white/90", "dark:bg-black/90");
        header.classList.add("bg-background/80", "dark:bg-black/50");
      }
    });
  }
</script>