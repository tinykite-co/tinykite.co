---
import Layout from "../layouts/Layout.astro";
---

<Layout title="TinyKite - We innovate. We build. We connect.">
  <!-- ✅ Hero Section (iPhone + Android + Scroll Animations) -->
  <section class="pt-24 md:pt-28 lg:pt-32 pb-20 relative z-0">
    <div
      id="hero"
      class="min-h-[90vh] flex items-center justify-center bg-gradient-to-br from-gray-50 to-white dark:from-dark-lighter dark:to-dark px-6 md:px-10 overflow-hidden"
    >
      <div
        class="grid grid-cols-1 lg:grid-cols-3 gap-14 lg:gap-20 items-center max-w-7xl w-full"
      >
        <!-- LEFT PHONE (iPhone Style) -->
        <div class="flex flex-col items-center justify-center order-2 lg:order-1">
          <div
            id="left-phone"
            class="relative w-64 md:w-72 h-[560px] md:h-[620px] bg-[#0a0a1a] rounded-[3rem] p-3 shadow-[0_10px_40px_rgba(0,0,0,0.25)] overflow-hidden transition-transform duration-700 ease-out"
            style="transform-style: preserve-3d;"
          >
            <!-- Notch -->
            <div
              class="absolute top-0 left-1/2 -translate-x-1/2 w-36 h-6 bg-[#0a0a1a] rounded-b-3xl z-10"
            ></div>

            <!-- Screen -->
            <div
              id="left-screen"
              class="relative w-full h-full bg-[#4F46E5] rounded-[2.4rem] flex items-center justify-center text-white text-lg md:text-2xl font-semibold"
            >
              <div class="phone-text">Community Hub</div>
            </div>

            <!-- Bottom bar (gesture indicator) -->
            <div
              class="absolute bottom-3 left-1/2 -translate-x-1/2 w-24 h-1.5 bg-gray-300/40 rounded-full"
            ></div>
          </div>

          <p
            id="left-label"
            class="mt-4 text-sm font-medium text-gray-600 dark:text-gray-400"
          >
            iOS App
          </p>
        </div>

        <!-- CENTER CARD -->
        <div class="flex flex-col items-center justify-center order-1 lg:order-2 translate-y-0">
          <h1
            class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight text-center"
          >
            We innovate. We build.<br />We connect.
          </h1>
          <p
            class="text-base md:text-lg text-gray-600 dark:text-gray-400 max-w-lg mb-8 text-center"
          >
            TinyKite is a product studio crafting a seamless ecosystem of apps
            that empower and inspire.
          </p>

          <div
            id="center-card"
            class="relative bg-white/10 dark:bg-dark-light/30 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-white/30 dark:border-dark-light/50 w-[320px] md:w-[440px] overflow-hidden"
          >
            <!-- Reflection -->
            <div class="absolute inset-0 pointer-events-none overflow-hidden">
              <div
                id="center-reflection"
                class="absolute top-0 left-[-130%] w-[220%] h-full bg-gradient-to-r from-transparent via-white/40 to-transparent opacity-60 transform -skew-x-12"
              ></div>
            </div>

            <h2
              id="card-title"
              class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-3"
            >
              Community Hub
            </h2>
            <p
              id="card-desc"
              class="text-gray-600 dark:text-gray-400 mb-6 text-sm md:text-base leading-relaxed"
            >
              Connect with like-minded individuals, join groups, and share
              passions in a vibrant, safe space.
            </p>

            <div class="flex justify-center gap-4 mb-6 items-center">
              <div class="badge-wrapper">
                <img
                  src="/app-store-badge-fixed.svg"
                  alt="App Store"
                  class="store-badge"
                  loading="lazy"
                />
              </div>
              <div class="badge-wrapper">
                <img
                  src="/google-play-badge-fixed.svg"
                  alt="Google Play"
                  class="store-badge"
                  loading="lazy"
                />
              </div>
            </div>

            <div class="flex items-center justify-center gap-4">
              <button id="prev-btn" class="arrow-btn">←</button>
              <div id="dots" class="flex gap-3"></div>
              <button id="next-btn" class="arrow-btn">→</button>
            </div>
          </div>
        </div>

        <!-- RIGHT PHONE (Android Style) -->
        <div class="flex flex-col items-center justify-center order-3">
          <div
            id="right-phone"
            class="relative w-64 md:w-72 h-[560px] md:h-[620px] bg-[#1a1a1a] rounded-[2rem] p-2 shadow-[0_10px_40px_rgba(0,0,0,0.3)] overflow-hidden transition-transform duration-700 ease-out"
            style="transform-style: preserve-3d;"
          >
            <!-- Android Camera Hole -->
            <div
              class="absolute top-3 right-6 w-3 h-3 bg-black/60 rounded-full border border-gray-600 z-10"
            ></div>

            <!-- Screen -->
            <div
              id="right-screen"
              class="relative w-full h-full bg-[#4F46E5] rounded-[1.7rem] flex items-center justify-center text-white text-lg md:text-2xl font-semibold"
            >
              <div class="phone-text">Community Hub</div>
            </div>

            <!-- Android Navigation Dots -->
            <div
              class="absolute bottom-3 left-1/2 -translate-x-1/2 flex justify-center gap-3"
            >
              <div class="w-1.5 h-1.5 bg-gray-400/50 rounded-full"></div>
              <div class="w-1.5 h-1.5 bg-gray-400/50 rounded-full"></div>
              <div class="w-1.5 h-1.5 bg-gray-400/50 rounded-full"></div>
            </div>
          </div>

          <p
            id="right-label"
            class="mt-4 text-sm font-medium text-gray-600 dark:text-gray-400"
          >
            Android App
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ✅ Scroll Animation Script -->
  <script>
    if (typeof window !== "undefined") {
      const apps = [
        {
          name: "Community Hub",
          desc: "Connect with like-minded individuals, join groups, and share passions in a vibrant, safe space.",
          bg: "#4F46E5",
        },
        {
          name: "Quick Note",
          desc: "Capture thoughts in an instant — quick, clean, and beautifully simple note-taking on the go.",
          bg: "#10B981",
        },
        {
          name: "Color Picker Pro",
          desc: "Pick, save, and manage stunning color palettes — perfect for designers and creators.",
          bg: "#F59E0B",
        },
      ];

      let idx = 0;
      let isAnimating = false;

      const leftScreen = document.getElementById("left-screen");
      const rightScreen = document.getElementById("right-screen");
      const leftLabel = document.getElementById("left-label");
      const rightLabel = document.getElementById("right-label");
      const card = document.getElementById("center-card");
      const cardTitle = document.getElementById("card-title");
      const cardDesc = document.getElementById("card-desc");
      const reflection = document.getElementById("center-reflection");
      const dots = document.getElementById("dots");

      function finished(anim) {
        return anim?.finished || Promise.resolve();
      }

      function renderDots() {
        dots.innerHTML = "";
        apps.forEach((_, i) => {
          const dot = document.createElement("button");
          dot.className =
            "w-3 h-3 rounded-full transition-all duration-300";
          dot.style.background = i === idx ? "#4f46e5" : "#d1d5db";
          dot.style.transform = i === idx ? "scale(1.3)" : "scale(1)";
          dot.addEventListener("click", () => goToIndex(i));
          dots.appendChild(dot);
        });
      }
      renderDots();

      async function animateTo(app, dir = "down") {
        const offset = dir === "down" ? 40 : -40;

        const updatePhone = (screen, label) => {
          const currentBg = getComputedStyle(screen).backgroundColor;
          screen.animate(
            [
              { backgroundColor: currentBg },
              { backgroundColor: app.bg },
            ],
            { duration: 800, easing: "ease-in-out", fill: "forwards" }
          );
          screen.style.backgroundColor = app.bg;

          const text = screen.querySelector(".phone-text");
          text.animate(
            [
              { opacity: 0, transform: `translateY(${offset}px) scale(0.95)` },
              { opacity: 1, transform: "translateY(0) scale(1)" },
            ],
            { duration: 700, easing: "ease-out", fill: "forwards" }
          );
          text.textContent = app.name;
          label.textContent = app.name;
        };

        const cardOut = card.animate(
          [{ opacity: 1 }, { opacity: 0, transform: "translateY(-10px)" }],
          { duration: 400, easing: "ease-in", fill: "forwards" }
        );
        await finished(cardOut);

        cardTitle.textContent = app.name;
        cardDesc.textContent = app.desc;

        reflection.animate(
          [
            { transform: "translateX(-130%) skewX(-12deg)", opacity: 0.6 },
            { transform: "translateX(100%) skewX(-12deg)", opacity: 0 },
          ],
          { duration: 1000, easing: "ease-in-out", fill: "forwards" }
        );

        updatePhone(leftScreen, leftLabel);
        updatePhone(rightScreen, rightLabel);

        const cardIn = card.animate(
          [
            { opacity: 0, transform: "translateY(20px)" },
            { opacity: 1, transform: "translateY(0)" },
          ],
          { duration: 700, easing: "ease-out", fill: "forwards" }
        );

        await finished(cardIn);
      }

      async function goToIndex(n, dir = "down") {
        if (isAnimating) return;
        isAnimating = true;
        n = (n + apps.length) % apps.length;
        await animateTo(apps[n], dir);
        idx = n;
        renderDots();
        isAnimating = false;
      }

      let scrollTimeout;
      window.addEventListener(
        "wheel",
        (e) => {
          e.preventDefault();
          if (isAnimating) return;
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(() => {
            const dir = e.deltaY > 0 ? "down" : "up";
            goToIndex(idx + (dir === "down" ? 1 : -1), dir);
          }, 100);
        },
        { passive: false }
      );

      // ✨ Added 3D tilt animation on scroll for premium feel
      const tiltStrength = 10;
      function tiltPhones(e) {
        const rotation = (e.deltaY > 0 ? 1 : -1) * tiltStrength;
        document.getElementById("left-phone").animate(
          [{ transform: `rotateY(${rotation}deg)` }, { transform: "rotateY(0deg)" }],
          { duration: 700, easing: "ease-out", fill: "forwards" }
        );
        document.getElementById("right-phone").animate(
          [{ transform: `rotateY(${-rotation}deg)` }, { transform: "rotateY(0deg)" }],
          { duration: 700, easing: "ease-out", fill: "forwards" }
        );
      }
      window.addEventListener("wheel", tiltPhones, { passive: true });
    }
  </script>
</Layout>


header: